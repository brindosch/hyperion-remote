(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{4003:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("token-manager")],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-table",{attrs:{title:e.$t("conf.auth.managerTitle"),data:e.getInstanceData,columns:e.columns,"row-key":"name","hide-bottom":e.getInstanceData.length<=5,dense:e.$q.screen.lt.md,flat:"","wrap-cells":""},scopedSlots:e._u([{key:"top-right",fn:function(){return[n("q-btn",{attrs:{outline:"",round:"",dense:"",disable:e.errorName,icon:"add"}},[n("q-popup-edit",{attrs:{title:e.$t("conf.auth.tokenName"),buttons:"","label-set":e.$t("label.create"),validate:e.nameValidation},on:{hide:e.nameValidation,save:e.createToken,"before-show":function(t){e.currName=""}},model:{value:e.currName,callback:function(t){e.currName=t},expression:"currName"}},[n("q-input",{attrs:{dense:"",autofocus:"",error:e.errorName,"error-message":e.errorMessageName,spellcheck:"false"},model:{value:e.currName,callback:function(t){e.currName=t},expression:"currName"}})],1)],1)]},proxy:!0},{key:"body",fn:function(t){return[n("q-tr",{attrs:{props:t}},[n("q-td",{key:"comment",staticClass:"cursor-pointer",attrs:{props:t}},[e._v("\n        "+e._s(t.row.comment)+"\n        "),n("q-popup-edit",{attrs:{buttons:"",title:e.$t("conf.auth.tokenName"),"label-set":e.$t("label.save"),validate:e.nameValidation},on:{hide:e.nameValidation,save:function(n){return e.renameToken(t.row.id,n)},"before-show":function(n){e.currName=t.row.comment}},model:{value:e.currName,callback:function(t){e.currName=t},expression:"currName"}},[n("q-input",{attrs:{dense:"",autofocus:"",error:e.errorName,"error-message":e.errorMessageName,spellcheck:"false"},model:{value:e.currName,callback:function(t){e.currName=t},expression:"currName"}})],1)],1),n("q-td",{key:"last_use",attrs:{props:t}},[""!==t.row.last_use?[e._v("\n          "+e._s(e.dateToLocaleString(t.row.last_use))+"\n        ")]:e._e()],2),n("q-td",{key:"del",attrs:{props:t}},[n("q-btn",{attrs:{icon:"delete",flat:"",round:"",dense:""},on:{click:function(n){return e.handleDelete(t.row.id,t.row.comment)}}})],1)],1)]}}])})},s=[],i=n("967e"),c=n.n(i),l=(n("96cf"),n("fa84")),u=n.n(l),m=(n("7514"),n("e325")),d={mixins:[m["b"]],data:function(){return{currName:"",errorName:!1,errorMessageName:"",columns:[{name:"comment",required:!0,label:this.$t("conf.instance.tableName"),align:"left",field:"comment",sortable:!0},{name:"last_use",align:"left",label:this.$t("conf.auth.tableLastUse"),field:"last_use",sortable:!0,sort:function(e,t,n,a){return Date.parse(e)-Date.parse(t)}},{name:"del",align:"left",label:this.$q.lang.label.remove,field:"del"}]}},computed:{getInstanceData:function(){return this.$store.getters["api/getTokenList"]}},created:function(){},methods:{dateToLocaleString:function(e){return new Date(e).toLocaleString()},createToken:function(e,t){this.$socket.createToken(e.trim())},renameToken:function(e,t){this.$socket.renameToken(e,t.trim())},nameValidation:function(e){if(void 0!==e){var t=e.trim();if(t.length<5)return this.errorName=!0,this.errorMessageName=this.$t("validate.minLength",[5]),!1;if(this.$store.getters["api/getTokenList"].find((function(e){return e.comment==t})))return this.errorName=!0,this.errorMessageName=this.$t("validate.unique",['"'.concat(e,'"')]),!1}return this.errorName=!1,this.errorMessageName="",!0},handleDelete:function(){var e=u()(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.openConfirmDialog({title:this.$t("conf.auth.delToken"),msg:this.$t("conf.auth.delTokenMsg",{name:'"'.concat(n,'"')})});case 2:a=e.sent,a&&this.$socket.deleteToken(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}},f=d,p=n("2877"),h=Object(p["a"])(f,o,s,!1,null,null,null),g=h.exports,k={name:"PageInstance",components:{"token-manager":g},data:function(){return{}},computed:{},mounted:function(){},methods:{}},b=k,N=Object(p["a"])(b,a,r,!1,null,null,null);t["default"]=N.exports}}]);